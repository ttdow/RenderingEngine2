\doxysection{DX12\+Backend.\+h}
\hypertarget{_d_x12_backend_8h_source}{}\label{_d_x12_backend_8h_source}\index{RenderingEngine/src/dx12/DX12Backend.h@{RenderingEngine/src/dx12/DX12Backend.h}}
\mbox{\hyperlink{_d_x12_backend_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespace_engine}{Engine}}}
\DoxyCodeLine{00004\ \{}
\DoxyCodeLine{00005\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_engine_1_1_d_x12_backend_af1e4d106b164d5ec5dbd09782846d8f5}{DX12Backend}}}
\DoxyCodeLine{00006\ \ \ \ \ \{}
\DoxyCodeLine{00007\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00008\ }
\DoxyCodeLine{00009\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_engine_1_1_d_x12_backend_af1e4d106b164d5ec5dbd09782846d8f5}{DX12Backend}}()\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00010\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_engine_1_1_d_x12_backend_af1e4d106b164d5ec5dbd09782846d8f5}{DX12Backend}}(HINSTANCE\ hInstance,\ \textcolor{keyword}{const}\ HWND\&\ hwnd);}
\DoxyCodeLine{00011\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_engine_1_1_d_x12_backend_a6bdd9ff69b12bed726b22d89cc4b0fba}{\string~DX12Backend}}();}
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00025\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_engine_1_1_d_x12_backend_a3cd4ba6993c9dc72a68aba4572271a0b}{Draw}}();}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{class_engine_1_1_d_x12_backend_aea8cb8691133bbae60e5e58edcf9df5a}{quadVtx}}[18]\ =}
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ \ \ -\/1,\ 0,\ -\/1,}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ \ \ -\/1,\ 0,\ \ 1,}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ \ \ \ 1,\ 0,\ \ 1,}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ \ \ -\/1,\ 0,\ -\/1,}
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ \ \ \ 1,\ 0,\ -\/1,}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ \ \ \ 1,\ 0,\ \ 1}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{class_engine_1_1_d_x12_backend_a77b4ada216da566421b4f32424c5ff7f}{cubeVtx}}[24]\ =}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ \ \ \ \ -\/1,\ -\/1,\ -\/1,\ 1,\ -\/1,\ -\/1,\ -\/1,\ 1,\ -\/1,\ 1,\ 1,\ -\/1,\ -\/1,\ -\/1,\ \ 1,\ 1,\ -\/1,\ \ 1,\ -\/1,\ 1,\ \ 1,\ 1,\ 1,\ \ 1}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{short}\ \mbox{\hyperlink{class_engine_1_1_d_x12_backend_a57cf2482e349cb6c381c528e3c2c6a2c}{cubeIdx}}[36]\ =}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ \ \ \ \ 4,\ 6,\ 0,\ 2,\ 0,\ 6,\ 0,\ 1,\ 4,\ 5,\ 4,\ 1,}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ \ \ \ \ 0,\ 2,\ 1,\ 3,\ 1,\ 2,\ 1,\ 3,\ 5,\ 7,\ 5,\ 3,}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \ \ \ \ 2,\ 6,\ 3,\ 7,\ 3,\ 6,\ 4,\ 5,\ 6,\ 7,\ 6,\ 5}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ UINT\ \mbox{\hyperlink{class_engine_1_1_d_x12_backend_a36e7004e640b46f559dbb46ad1e72c3e}{NUM\_INSTANCES}}\ =\ 3;}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ uint64\_t\ \mbox{\hyperlink{class_engine_1_1_d_x12_backend_a31caf8ed6c525931a8e466f8f21e19a0}{NUM\_SHADER\_IDS}}\ =\ 3;}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ uint64\_t\ \mbox{\hyperlink{class_engine_1_1_d_x12_backend_a8df11d8e67cbf8ce844a7310f3968179}{value}};}
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ uint32\_t\ \mbox{\hyperlink{class_engine_1_1_d_x12_backend_a3dab4090ff47004e5409ad3bf863b5c7}{frameIndex}};}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ HANDLE\ \mbox{\hyperlink{class_engine_1_1_d_x12_backend_addd382290de986153e9c19e86c486057}{fenceEvent}};}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ uint64\_t\ \mbox{\hyperlink{class_engine_1_1_d_x12_backend_a3d54d9d8cbcd67be144711df19150e1d}{fenceValue}};}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ IDXGIFactory4*\ \mbox{\hyperlink{class_engine_1_1_d_x12_backend_ab64a46307464ebd634e17d590a1f4f5c}{factory}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ ID3D12Debug1*\ \mbox{\hyperlink{class_engine_1_1_d_x12_backend_a2cc6c71653e62877a41adca03da0eafb}{debugController}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ ID3D12Device5*\ \mbox{\hyperlink{class_engine_1_1_d_x12_backend_a2878d2c7f3e102f19c143cd80b9538e6}{device}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ ID3D12DebugDevice*\ \mbox{\hyperlink{class_engine_1_1_d_x12_backend_a8715177fcc73744c1962844c4ee0a37f}{debugDevice}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ ID3D12CommandQueue*\ \mbox{\hyperlink{class_engine_1_1_d_x12_backend_ab814b45d2dacb8bce9ba80644a634b0c}{cmdQueue}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ ID3D12Fence*\ \mbox{\hyperlink{class_engine_1_1_d_x12_backend_a76cbd304d2b2d03824413e0c8a431353}{fence}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ IDXGISwapChain3*\ \mbox{\hyperlink{class_engine_1_1_d_x12_backend_a5b32da2a15500488087e7a9047401ef1}{swapchain}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ ID3D12DescriptorHeap*\ \mbox{\hyperlink{class_engine_1_1_d_x12_backend_a868803ce01b39352e5cb1ef392e4d8ec}{uavHeap}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ ID3D12Resource*\ \mbox{\hyperlink{class_engine_1_1_d_x12_backend_a97034abc8de8fef0337bdbe72a4524c6}{renderTarget}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ ID3D12CommandAllocator*\ \mbox{\hyperlink{class_engine_1_1_d_x12_backend_aa165e8a81a5daa4d39149f7bac9d12c1}{cmdAlloc}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ ID3D12GraphicsCommandList4*\ \mbox{\hyperlink{class_engine_1_1_d_x12_backend_a62a97927da7e3d6bffeddea471640408}{cmdList}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ ID3D12Resource*\ \mbox{\hyperlink{class_engine_1_1_d_x12_backend_adf339ca9d14f736c873f2edd9616bd8f}{quadVB}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ ID3D12Resource*\ \mbox{\hyperlink{class_engine_1_1_d_x12_backend_a2de46bea514b1cbd21934731d7ae8610}{cubeVB}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ ID3D12Resource*\ \mbox{\hyperlink{class_engine_1_1_d_x12_backend_a445481d524858b2b078c3570c22bc179}{cubeIB}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ ID3D12Resource*\ \mbox{\hyperlink{class_engine_1_1_d_x12_backend_aa273a4af45ee011434d32154bbccabba}{quadBlas}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ ID3D12Resource*\ \mbox{\hyperlink{class_engine_1_1_d_x12_backend_a921c5d673f26e20a3870d500f247c85b}{cubeBlas}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ ID3D12Resource*\ \mbox{\hyperlink{class_engine_1_1_d_x12_backend_ac755d3acf91c3ce9b565214f8f1de33f}{instances}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ D3D12\_RAYTRACING\_INSTANCE\_DESC*\ \mbox{\hyperlink{class_engine_1_1_d_x12_backend_aadbe7e9d3e3094ff8a23e5604dd3bc4f}{instanceData}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ ID3D12Resource*\ \mbox{\hyperlink{class_engine_1_1_d_x12_backend_a639605ca206027840a1132892dab8fdf}{tlas}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ ID3D12Resource*\ \mbox{\hyperlink{class_engine_1_1_d_x12_backend_a971ad2b40ae1026b025ccea7d5125b07}{tlasUpdateScratch}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ ID3D12RootSignature*\ \mbox{\hyperlink{class_engine_1_1_d_x12_backend_a93d0a8910b0616e248ad1f1a2d3dc4e2}{rootSignature}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ ID3D12StateObject*\ \mbox{\hyperlink{class_engine_1_1_d_x12_backend_ac48b2c88e36c6ac08bcb8826d1ff120c}{pso}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ ID3D12Resource*\ \mbox{\hyperlink{class_engine_1_1_d_x12_backend_a015cfa669c7a2ecc538c9a2f413fb2a1}{shaderIDs}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00092\ }
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_engine_1_1_d_x12_backend_a27280920a4503b96c1052f3621e29e25}{InitDevice}}();}
\DoxyCodeLine{00106\ }
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_engine_1_1_d_x12_backend_add18cbc75a5de3700ec8f52fd4244b88}{InitSurfaces}}(\textcolor{keyword}{const}\ HWND\&\ hwnd);}
\DoxyCodeLine{00121\ }
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO.}}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_engine_1_1_d_x12_backend_a2c9eeb0276259e2e10781e70e30183eb}{InitCommand}}();}
\DoxyCodeLine{00124\ }
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_engine_1_1_d_x12_backend_a4ae18477a9a5f3cea0be273dd9facd57}{InitMeshes}}();}
\DoxyCodeLine{00139\ }
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_engine_1_1_d_x12_backend_af377fb66483cab91b9ec4a66fb545b80}{InitBLAS}}();}
\DoxyCodeLine{00150\ }
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_engine_1_1_d_x12_backend_aa0e79ccdce88d0914d30338d1f2317c4}{InitScene}}();}
\DoxyCodeLine{00163\ }
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_engine_1_1_d_x12_backend_a1695331938aa4a4de4df29ca1e0f7ad4}{InitTLAS}}();}
\DoxyCodeLine{00176\ }
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_engine_1_1_d_x12_backend_a2fdf4447620a5a032959786bc19327ea}{InitRootSignature}}();}
\DoxyCodeLine{00189\ }
\DoxyCodeLine{00200\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_engine_1_1_d_x12_backend_a64b1d337cf80a1cad38748dc1a295a03}{InitPipeline}}();}
\DoxyCodeLine{00201\ }
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_engine_1_1_d_x12_backend_ad6eae98cea43017ecbe059fa9ed9dbbc}{Update}}();}
\DoxyCodeLine{00211\ }
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_engine_1_1_d_x12_backend_a8d3f37e0cfbbac7926d8f7f39750df32}{WaitForGPU}}();}
\DoxyCodeLine{00228\ }
\DoxyCodeLine{00242\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_engine_1_1_d_x12_backend_abc47b54b618300d5aad4a68f703e95e8}{Resize}}(\textcolor{keyword}{const}\ HWND\&\ hwnd);}
\DoxyCodeLine{00243\ }
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ ID3D12Resource*\ \mbox{\hyperlink{class_engine_1_1_d_x12_backend_a6337f35d9a7a3317a593233d2b9b827d}{MakeAccelerationStructure}}(\textcolor{keyword}{const}\ D3D12\_BUILD\_RAYTRACING\_ACCELERATION\_STRUCTURE\_INPUTS\&\ inputs,\ UINT64*\ updateScratchSize\ =\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00261\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00274\ \ \ \ \ \ \ \ \ ID3D12Resource*\ \mbox{\hyperlink{class_engine_1_1_d_x12_backend_a63f77b081d4916299151b3dd90130153}{MakeBLAS}}(ID3D12Resource*\ vertexBuffer,\ UINT\ vertexFloats,\ ID3D12Resource*\ indexBuffer\ =\ \textcolor{keyword}{nullptr},\ UINT\ indices\ =\ 0);}
\DoxyCodeLine{00275\ }
\DoxyCodeLine{00292\ \ \ \ \ \ \ \ \ ID3D12Resource*\ \mbox{\hyperlink{class_engine_1_1_d_x12_backend_a4754663bd7399762fd506bbff1221e8d}{MakeTLAS}}(ID3D12Resource*\ \mbox{\hyperlink{class_engine_1_1_d_x12_backend_ac755d3acf91c3ce9b565214f8f1de33f}{instances}},\ UINT\ numInstances,\ UINT64*\ updateScratchSize\ =\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00293\ }
\DoxyCodeLine{00302\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_engine_1_1_d_x12_backend_a2f304c1df19ca3a7b22815e7cf5a8152}{UpdateTransforms}}();}
\DoxyCodeLine{00303\ \ \ \ \ \};}
\DoxyCodeLine{00304\ \}}

\end{DoxyCode}
