\doxysection{DX12\+Backend.\+h}
\hypertarget{_d_x12_backend_8h_source}{}\label{_d_x12_backend_8h_source}\index{RenderingEngine/src/dx12/DX12Backend.h@{RenderingEngine/src/dx12/DX12Backend.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{keyword}{namespace\ }Engine}
\DoxyCodeLine{00004\ \{}
\DoxyCodeLine{00005\ \ \ \ \ \textcolor{keyword}{class\ }DX12Backend}
\DoxyCodeLine{00006\ \ \ \ \ \{}
\DoxyCodeLine{00007\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00008\ }
\DoxyCodeLine{00009\ \ \ \ \ \ \ \ \ DX12Backend()\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00010\ \ \ \ \ \ \ \ \ DX12Backend(HINSTANCE\ hInstance,\ \textcolor{keyword}{const}\ HWND\&\ hwnd);}
\DoxyCodeLine{00011\ \ \ \ \ \ \ \ \ \string~DX12Backend();}
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00025\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_engine_1_1_d_x12_backend_a3cd4ba6993c9dc72a68aba4572271a0b}{Draw}}();}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{float}\ quadVtx[18]\ =}
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ \ \ -\/1,\ 0,\ -\/1,}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ \ \ -\/1,\ 0,\ \ 1,}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ \ \ \ 1,\ 0,\ \ 1,}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ \ \ -\/1,\ 0,\ -\/1,}
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ \ \ \ 1,\ 0,\ -\/1,}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ \ \ \ 1,\ 0,\ \ 1}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{float}\ cubeVtx[24]\ =}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ \ \ \ \ -\/1,\ -\/1,\ -\/1,\ 1,\ -\/1,\ -\/1,\ -\/1,\ 1,\ -\/1,\ 1,\ 1,\ -\/1,\ -\/1,\ -\/1,\ \ 1,\ 1,\ -\/1,\ \ 1,\ -\/1,\ 1,\ \ 1,\ 1,\ 1,\ \ 1}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{short}\ cubeIdx[36]\ =}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ \ \ \ \ 4,\ 6,\ 0,\ 2,\ 0,\ 6,\ 0,\ 1,\ 4,\ 5,\ 4,\ 1,}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ \ \ \ \ 0,\ 2,\ 1,\ 3,\ 1,\ 2,\ 1,\ 3,\ 5,\ 7,\ 5,\ 3,}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \ \ \ \ 2,\ 6,\ 3,\ 7,\ 3,\ 6,\ 4,\ 5,\ 6,\ 7,\ 6,\ 5}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ UINT\ NUM\_INSTANCES\ =\ 3;}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ uint64\_t\ NUM\_SHADER\_IDS\ =\ 3;}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ uint64\_t\ value;}
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ uint32\_t\ frameIndex;}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ HANDLE\ fenceEvent;}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ uint64\_t\ fenceValue;}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ IDXGIFactory4*\ factory\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ ID3D12Debug1*\ debugController\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ ID3D12Device5*\ device\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ ID3D12DebugDevice*\ debugDevice\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ ID3D12CommandQueue*\ cmdQueue\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ ID3D12Fence*\ fence\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ IDXGISwapChain3*\ swapchain\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ ID3D12DescriptorHeap*\ uavHeap\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ ID3D12Resource*\ renderTarget\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ ID3D12CommandAllocator*\ cmdAlloc\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ ID3D12GraphicsCommandList4*\ cmdList\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ ID3D12Resource*\ quadVB\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ ID3D12Resource*\ cubeVB\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ ID3D12Resource*\ cubeIB\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ ID3D12Resource*\ quadBlas\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ ID3D12Resource*\ cubeBlas\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ ID3D12Resource*\ instances\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ D3D12\_RAYTRACING\_INSTANCE\_DESC*\ instanceData\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ ID3D12Resource*\ tlas\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ ID3D12Resource*\ tlasUpdateScratch\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ ID3D12RootSignature*\ rootSignature\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ ID3D12StateObject*\ pso\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ ID3D12Resource*\ shaderIDs\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00092\ }
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ InitDevice();}
\DoxyCodeLine{00106\ }
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ InitSurfaces(\textcolor{keyword}{const}\ HWND\&\ hwnd);}
\DoxyCodeLine{00121\ }
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO.}}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ InitCommand();}
\DoxyCodeLine{00124\ }
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ InitMeshes();}
\DoxyCodeLine{00139\ }
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ InitBLAS();}
\DoxyCodeLine{00150\ }
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ InitScene();}
\DoxyCodeLine{00163\ }
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ InitTLAS();}
\DoxyCodeLine{00176\ }
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ InitRootSignature();}
\DoxyCodeLine{00189\ }
\DoxyCodeLine{00200\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ InitPipeline();}
\DoxyCodeLine{00201\ }
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ Update();}
\DoxyCodeLine{00211\ }
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ WaitForGPU();}
\DoxyCodeLine{00228\ }
\DoxyCodeLine{00242\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ Resize(\textcolor{keyword}{const}\ HWND\&\ hwnd);}
\DoxyCodeLine{00243\ }
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ ID3D12Resource*\ MakeAccelerationStructure(\textcolor{keyword}{const}\ D3D12\_BUILD\_RAYTRACING\_ACCELERATION\_STRUCTURE\_INPUTS\&\ inputs,\ UINT64*\ updateScratchSize\ =\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00261\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00274\ \ \ \ \ \ \ \ \ ID3D12Resource*\ MakeBLAS(ID3D12Resource*\ vertexBuffer,\ UINT\ vertexFloats,\ ID3D12Resource*\ indexBuffer\ =\ \textcolor{keyword}{nullptr},\ UINT\ indices\ =\ 0);}
\DoxyCodeLine{00275\ }
\DoxyCodeLine{00292\ \ \ \ \ \ \ \ \ ID3D12Resource*\ MakeTLAS(ID3D12Resource*\ instances,\ UINT\ numInstances,\ UINT64*\ updateScratchSize\ =\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00293\ }
\DoxyCodeLine{00302\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ UpdateTransforms();}
\DoxyCodeLine{00303\ \ \ \ \ \};}
\DoxyCodeLine{00304\ \}}

\end{DoxyCode}
